<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Admin Edit page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link th:href="@{/style/edit.css}" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body>
<div class="container">
    <div class="header">
        <h5>for managers</h5>
        <h5 th:text="${type}" style="visibility: hidden" id="type"></h5>
        <p th:text="${product.getId()}" style="visibility: hidden" id="id"></p>
        <p th:text="${product.getType()}" style="visibility: hidden" id="type1"></p>
    </div>

    <h5>Edit Product</h5>
    <br>
    <table class="table table-bordered table-striped" style="width: 100%">
        <tbody>
        <tr>
            <td>Name</td>
            <td>
                <input type="text" name="name" placeholder="Product name" id="name" style="width: 512px" th:value="${product.getName()}"> </input>
            </td>
        </tr>

        <tr>
            <td>Price</td>
            <td>
                <input type="text" name="price" placeholder="Product price" id="price" style="width: 512px" th:value="${product.getPrice()}"> </input>
            </td>
        </tr>

        <tr>
            <td>Image</td>
            <td>
                <input type="file" name="image" placeholder="Product image" id="image" style="width: 512px" th:value="${image}"> </input>
            </td>
        </tr>

        <tr>
            <td>Details</td>
            <td>
                <input type="text" name="details" placeholder="Product name" id="details" style="width: 512px" th:value="${product.getDetails()}"> </input>
            </td>
        </tr>
        </tbody>
    </table>
    <button onclick="edits()"> Submit</button>
</div>
</body>

<script>
    function edits() {
        let id = document.getElementById("id").textContent;
        let name = document.getElementById("name").value;
        let price = document.getElementById("price").value;
        let image = document.getElementById("image").value;
        let description = document.getElementById("details").value;
        let type = document.getElementById("type").textContent;
        let type1 = document.getElementById("type1").textContent;

        let file = "-img-";

        for(let i = 0; i < image.length; i++) {
            if(i > 11) {
                file += image.charAt(i);
            }
        }

        if (type == "main") {
            window.location.replace("http://localhost:8080/main/admin/edit/id/" + id + "/name/" + name + "/price/" + price
                + "/image/" + file + "/details/" + description + "/type/" + type1);
        } else if (type == "best") {
            window.location.replace("http://localhost:8080/main/best/edit/id/" + id + "/name/" + name + "/price/" + price
                + "/image/" + file + "/details/" + description + "/type/" + type1);
        } else if (type == "new") {
            window.location.replace("http://localhost:8080/main/new/edit/id/" + id + "/name/" + name + "/price/" + price
                + "/image/" + file + "/details/" + description + "/type/" + type1);
        } else {
            console.log(type)
        }
    }
</script>
</html>